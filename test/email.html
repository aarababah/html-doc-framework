<!doctype html>
<meta charset="utf-8">
<script src="../../webcomponentsjs/webcomponents-lite.min.js"></script>
<script src="../../web-component-tester/browser.js"></script>
<script src="../../chai-dom/chai-dom.js"></script>
<link rel="import" href="../email.html">
<link rel="import" href="../publish.html">
</head>
<body>
  <cxx-email id="a">foo@example.com</cxx-email>
  <cxx-publish-button id="publish"></cxx-publish-button>
  <script>
    suite('<cxx-email>', function() {
      test('produces link', function() {
        return document.getElementById('publish').cloneStaticAndInline(document)
        .then(copy => {
          var email = copy.querySelector('cxx-email#a');
          expect(email).to.exist;
          var a = email.firstChild;
          expect(a.localName).to.equal('a');
          expect(a.nextSibling).to.not.exist;
          expect(a).to.have.text('foo@example.com');
          expect(a.href).to.equal('mailto:foo@example.com');
          expect(a).to.have.class('cxx-email');
        })
      });
    });
  </script>
</body>
</html>
